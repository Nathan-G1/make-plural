#!/usr/bin/env node

/** A minimal/sample interface for make-plural.js
 *
 *  Usage:
 *    ./bin/make-plural            // checks all locale rules
 *    ./bin/make-plural [lc]       // prints the locale function for `lc`
 *    ./bin/make-plural [lc] [v]   // prints the plural category for `v` in locale `lc`
 */

var MakePlural = require('../');

if (process.argv[2]) {
    var mp = new MakePlural(process.argv[2], {ordinals:1});
    if (process.argv[3]) {
        console.log(mp(process.argv[3]));
    } else {
        console.log(mp.toString(mp.obj.lc));
    }
} else {
    var ok = [];
    MakePlural.load('unicode-cldr-plural-rules.json');
    for (var lc in MakePlural.rules['cardinal']) {
        var mp = new MakePlural(lc, {'ordinals':1});
        if (mp.test()) ok.push(lc);
        else console.error('Locale "' + lc + '" FAILED\n');
    }
    console.log('Locales verified ok:' + ok.join(' ').replace(/(.{1,73})( |$)/g, '\n    $1'));
}
